

<!DOCTYPE html>
<html>
<head>
	<title>Bryn's Test Studio</title>
	<script src="http://code.createjs.com/easeljs-0.7.0.min.js"></script>
	<script src="../javascript/topbar.js"></script>
	<script>
		
		var stage;

		function init() {
			
			stage = new createjs.Stage("game2");
			
			//leftclic variable
			leftclic = new createjs.Shape();
			leftclic.graphics.beginFill("grey").drawRect(0,0,stage.canvas.width/2,stage.canvas.height);
			leftclic.addEventListener("click", toggleLeft);
			stage.addChild(leftclic)
		
			//rightclic variable
			rightclic = new createjs.Shape();
			rightclic.graphics.beginFill("black").drawRect(stage.canvas.width/2,0,stage.canvas.width/2,stage.canvas.height);
			rightclic.addEventListener("click", toggleRight);
			stage.addChild(rightclic)
			
			//Button click to move user to the left
			function toggleLeft(){
			stage.removeChild(user);
			if(user.x >= stage.canvas.width/4){
			user.x = stage.canvas.width/4;
			stage.addChild(user);
			alert("Good touch");
			}}
		
			//Button click to move user to the right
			function toggleRight(){
			stage.removeChild(user);
			if(user.x <= stage.canvas.width/2 && user.x <= stage.canvas.width){
			user.x = (stage.canvas.width*3/4);
			stage.addChild(user);
			alert("Good touch");
			}else{}}
			
			//Falling Object
			function createEnemy(){
			enemy = new createjs.Shape();
			enemy.graphics.beginFill("red").drawRect(0,0, stage.canvas.width/2, 40);
			
			//position 1
			//enemy.x = stage.canvas.width/2;
			
			//position 2
			enemy.x = stage.canvas.width/2-stage.canvas.width/2;
			enemy.y = -50;
			enemy.width = 75;
			
			
			stage.addChild(enemy);		
			}
			//enemyPosition(){
			
			//}
			createEnemy();
			//User Object
			function createUser(){
			user = new createjs.Shape();
			user.graphics.beginFill("Blue").drawCircle(0,0,30);
			user.x = stage.canvas.width/2;
			user.y = 500;
			user.width = 25;
			
			stage.addChild(user);
			}
			createUser();
			//Ticker that moves the enemy down from the top/Mostly controls speed
			createjs.Ticker.on("tick", tick);
			createjs.Ticker.setFPS(25);
			checkCollisions();
			
			stage.update();
			
		}
		
		//Not sure if this function is working but the logic within it is what Is important.
		function checkCollisions(){
			var xDist = user.x - enemy.x;
			var yDist = user.y - enemy.y;
			var distance = Math.sqrt(xDist*xDist + yDist*yDist);
			if (distance <= (user.width + enemy.width)){
			//alert("bad touch");
			stage.removeChild(user);
			stage.update;
			}else{
			}}
		
		//Tick function that actually moves the enemy object
		function tick(event) {
			enemy.y = enemy.y + 5;
			if (enemy.y > stage.canvas.height+50) { 
			enemy.y = 0; 
			stage.removeChild(enemy);
			}
			checkCollisions();
			stage.addChild(enemy);
			stage.update(event); // important!! without the object does not move
		}
		
	</script>
</head>
<body onload="init();">
	<canvas id="game2" width="320" height="568" style="border:2px solid #d3d3d3;">
		alternate content
	</canvas>
</body>
</html>